<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rotational Speed Converter</title>
  <style>
    :root {
      --bg: #0f172a;
      --panel: #111827;
      --text: #e5e7eb;
      --muted: #94a3b8;
      --accent: #22d3ee;
      --accent-weak: #06738a;
      --border: #1f2937;
    }
    html, body {
      height: 100%;
    }
    body {
      margin: 0;
      background: linear-gradient(180deg, #0b1220, var(--bg));
      color: var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      display: grid;
      place-items: center;
      padding: 24px;
      box-sizing: border-box;
    }
    .card {
      width: 100%;
      max-width: 680px;
      background: radial-gradient(1200px 300px at 0% 0%, rgba(34,211,238,0.08), transparent 60%),
                  radial-gradient(800px 300px at 100% 0%, rgba(99,102,241,0.08), transparent 60%),
                  var(--panel);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.03);
    }
    h1 {
      margin: 0 0 8px 0;
      font-size: 22px;
      letter-spacing: 0.2px;
    }
    .sub {
      margin: 0 0 20px 0;
      color: var(--muted);
      font-size: 13px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 12px;
    }
    .field {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    label {
      font-size: 12px;
      color: var(--muted);
    }
    input[type="number"], select, input[readonly] {
      background: #0b1322;
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 10px 12px;
      outline: none;
      font-size: 14px;
      transition: border-color 0.15s ease, box-shadow 0.15s ease;
    }
    input[type="number"]:focus, select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(34,211,238,0.15);
    }
    .row {
      display: contents;
    }
    .col-span-8 { grid-column: span 8 / span 8; }
    .col-span-4 { grid-column: span 4 / span 4; }
    .col-span-6 { grid-column: span 6 / span 6; }
    .col-span-12 { grid-column: span 12 / span 12; }
    @media (max-width: 640px) {
      .col-span-8, .col-span-6, .col-span-4, .col-span-12 { grid-column: 1 / -1; }
    }
    .hint {
      font-size: 12px;
      color: var(--muted);
    }
    .switch {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      background: #0b1322;
      border: 1px solid var(--border);
      border-radius: 999px;
      padding: 8px 10px;
      user-select: none;
    }
    .switch input { display: none; }
    .pill {
      display: inline-block;
      padding: 6px 10px;
      border-radius: 999px;
      cursor: pointer;
      color: var(--muted);
      background: transparent;
      border: 1px solid transparent;
    }
    .pill.active {
      color: var(--text);
      background: linear-gradient(180deg, rgba(34,211,238,0.18), rgba(34,211,238,0.08));
      border-color: var(--accent-weak);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.06);
    }
    .outputs {
      margin-top: 8px;
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 12px;
    }
    .help {
      margin-top: 10px;
      font-size: 12px;
      color: var(--muted);
    }
    .footer {
      margin-top: 18px;
      font-size: 12px;
      color: var(--muted);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .kbd {
      background: #0b1322;
      border: 1px solid var(--border);
      padding: 2px 6px;
      border-radius: 6px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      color: var(--text);
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>Rotational Speed Converter</h1>
    <p class="sub">Convert between deg/s, rev/s, rpm with optional gear ratio.</p>

    <div class="grid">
      <div class="row">
        <div class="field col-span-8">
          <label for="value">Input value</label>
          <input id="value" type="number" step="any" placeholder="e.g., 120" />
        </div>
        <div class="field col-span-4">
          <label for="unit">Unit</label>
          <select id="unit">
            <option value="deg_s">deg/s</option>
            <option value="rev_s">rev/s</option>
            <option value="rpm">rpm</option>
          </select>
        </div>
      </div>

      <div class="row">
        <div class="field col-span-6">
          <label for="gear">Gear ratio</label>
          <input id="gear" type="number" step="any" min="0" placeholder="e.g., 2" />
          <div class="hint">Must be positive. With "Output speed" selected, 2 means output is half motor speed.</div>
        </div>
        <div class="field col-span-6">
          <label>Output speed or motor speed</label>
          <div class="switch" role="group" aria-label="Gear ratio mode">
            <button id="modeOutIn" class="pill active" type="button" aria-pressed="true">Output speed</button>
            <button id="modeInOut" class="pill" type="button" aria-pressed="false">Motor speed</button>
          </div>
          <div class="help" id="modeHelp">Output speed = Motor speed / Ratio</div>
        </div>
      </div>
    </div>

    <div class="outputs">
      <div class="field col-span-4">
        <label for="out_deg_s">deg/s</label>
        <input id="out_deg_s" type="text" readonly />
      </div>
      <div class="field col-span-4">
        <label for="out_rev_s">rev/s</label>
        <input id="out_rev_s" type="text" readonly />
      </div>
      <div class="field col-span-4">
        <label for="out_rpm">rpm</label>
        <input id="out_rpm" type="text" readonly />
      </div>
    </div>

    <div class="footer">
      <span>Tip: Use <span class="kbd">Tab</span> to jump between fields.</span>
      <span id="status"></span>
    </div>
  </div>

  <script>
    (function () {
      const inputValue = document.getElementById('value');
      const inputUnit = document.getElementById('unit');
      const inputGear = document.getElementById('gear');
      const outDegS = document.getElementById('out_deg_s');
      const outRevS = document.getElementById('out_rev_s');
      const outRpm = document.getElementById('out_rpm');
      const modeOutIn = document.getElementById('modeOutIn');
      const modeInOut = document.getElementById('modeInOut');
      const modeHelp = document.getElementById('modeHelp');
      const status = document.getElementById('status');

      /**
       * Convert arbitrary unit to rev/s.
       */
      function toRevPerSec(value, unit) {
        if (!isFinite(value)) return NaN;
        switch (unit) {
          case 'deg_s':
            return value / 360;
          case 'rev_s':
            return value;
          case 'rpm':
            return value / 60;
          default:
            return NaN;
        }
      }

      /**
       * From rev/s to all other units.
       */
      function fromRevPerSec(revPerSec) {
        if (!isFinite(revPerSec)) return { deg_s: '', rev_s: '', rpm: '' };
        return {
          deg_s: revPerSec * 360,
          rev_s: revPerSec,
          rpm: revPerSec * 60
        };
      }

      function formatNumber(n) {
        if (!isFinite(n)) return '';
        const abs = Math.abs(n);
        const useSci = (abs !== 0 && (abs < 1e-3 || abs >= 1e6));
        return useSci ? n.toExponential(6) : n.toLocaleString(undefined, { maximumFractionDigits: 6 });
      }

      let mode = 'out_in'; // 'out_in' => output = input / ratio, 'in_out' => output = input * ratio

      function setMode(newMode) {
        mode = newMode;
        const outInActive = mode === 'out_in';
        modeOutIn.classList.toggle('active', outInActive);
        modeInOut.classList.toggle('active', !outInActive);
        modeOutIn.setAttribute('aria-pressed', String(outInActive));
        modeInOut.setAttribute('aria-pressed', String(!outInActive));
        modeHelp.textContent = outInActive ? 'Output speed = Motor speed / Ratio' : 'Output speed = Motor speed Ã— Ratio';
        update();
      }

      modeOutIn.addEventListener('click', () => setMode('out_in'));
      modeInOut.addEventListener('click', () => setMode('in_out'));

      function update() {
        const value = parseFloat(inputValue.value);
        const unit = inputUnit.value;
        const ratio = parseFloat(inputGear.value);

        const valueOk = isFinite(value);
        const ratioOk = isFinite(ratio) && ratio > 0;

        if (!valueOk) {
          status.textContent = '';
          outDegS.value = '';
          outRevS.value = '';
          outRpm.value = '';
          return;
        }

        const inRevS = toRevPerSec(value, unit);
        let outRevSVal = inRevS;

        if (ratioOk) {
          outRevSVal = (mode === 'out_in') ? (inRevS / ratio) : (inRevS * ratio);
          status.textContent = '';
        } else if (inputGear.value.trim() !== '') {
          status.textContent = 'Enter a positive gear ratio';
        } else {
          status.textContent = '';
        }

        const converted = fromRevPerSec(outRevSVal);
        outDegS.value = formatNumber(converted.deg_s);
        outRevS.value = formatNumber(converted.rev_s);
        outRpm.value = formatNumber(converted.rpm);
      }

      inputValue.addEventListener('input', update);
      inputUnit.addEventListener('change', update);
      inputGear.addEventListener('input', update);

      // Defaults for a quick demo
      inputValue.value = '120';
      inputUnit.value = 'rpm';
      inputGear.value = '';
      update();
    })();
  </script>
</body>
</html>


